{"version":3,"sources":["webpack:///src/app/core/katalog/kemaskini-katalog/kemaskini-katalog.page.ts","webpack:///src/app/services/katalog/katalog.service.ts","webpack:///src/app/services/stok/stok.service.ts","webpack:///src/app/core/katalog/kemaskini-katalog/kemaskini-katalog.page.scss","webpack:///src/app/core/katalog/kemaskini-katalog/kemaskini-katalog.page.html"],"names":["KemaskiniKatalogPage","modalController","formBuilder","katalogService","loadingController","alertController","stokService","usahawan_id","window","sessionStorage","getItem","user_id","url","convertBlobToBase64","blob","Promise","resolve","reject","reader","FileReader","onerror","onload","result","readAsDataURL","form","group","id_pengguna","nama_produk","Validators","kandungan_produk","harga_produk","berat_produk","keterangan_produk","gambar_url","baki_stok","unit_production","status_katalog","modified_by","images","console","log","katalog","setFormValues","dismiss","getStokKatalog","pipe","map","x","filter","i","id_katalog","id","subscribe","res","totalStok","forEach","element","Number","stok_dijual","bakiStok","value","patchValue","setValue","updateValueAndValidity","tarikh_aliran","format","create","message","loading","present","update","presentAlert","presentAlert2","cssClass","header","subHeader","buttons","alert","onDidDismiss","role","refresh","location","reload","event","target","files","fileEvent","e","file","filePath","size","readAsBase64","base64Data","fileName","Date","getTime","push","name","path","data","ModalController","FormBuilder","KatalogService","LoadingController","AlertController","StokService","Input","Component","selector","template","http","environment","post","get","aliran","aliran_id","put","HttpClient","Injectable","providedIn","url2","id_pelanggan"],"mappings":"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","file":"default-src_app_core_katalog_kemaskini-katalog_kemaskini-katalog_page_ts-es5.js","sourcesContent":["import { Component, Input, OnInit } from '@angular/core';\nimport { AlertController, LoadingController, ModalController } from '@ionic/angular';\nimport { FormGroup, FormBuilder } from '@angular/forms';\nimport { Validators } from '@angular/forms';\nimport { KatalogService } from 'src/app/services/katalog/katalog.service';\nimport * as moment from 'moment';\nimport { StokService } from 'src/app/services/stok/stok.service';\nimport { map } from 'rxjs/operators';\n\n\ninterface LocalFile {\n  name: string;\n  path: string;\n  data: string;\n}\n\n@Component({\n  selector: 'app-kemaskini-katalog',\n  templateUrl: './kemaskini-katalog.page.html',\n  styleUrls: ['./kemaskini-katalog.page.scss'],\n})\nexport class KemaskiniKatalogPage implements OnInit {\n\n  @Input() katalog: any;\n\n  private form: FormGroup;\n\n  usahawan_id = window.sessionStorage.getItem(\"usahawan_id\");\n  user_id = window.sessionStorage.getItem(\"user_id\");\n\n  constructor(\n    public modalController: ModalController,\n    private formBuilder: FormBuilder,\n    private katalogService: KatalogService,\n    public loadingController: LoadingController,\n    public alertController: AlertController,\n    private stokService: StokService,\n  ) {\n    this.form = this.formBuilder.group({\n      id_pengguna: ['',],\n      nama_produk: ['', Validators.required],\n      kandungan_produk: ['', Validators.required],\n      harga_produk: ['', Validators.required],\n      berat_produk: ['', Validators.required],\n      keterangan_produk: ['', Validators.required],\n\n      gambar_url: ['', Validators.required],\n      baki_stok: ['',],\n      unit_production: ['', Validators.required],\n      status_katalog: ['', Validators.required],\n      // disahkan_oleh: ['', Validators.required],\n      modified_by: ['',],\n    });\n  }\n\n  ngOnInit() {\n    this.images = [];\n\n    console.log(\"katalog\", this.katalog)\n    this.setFormValues();\n  }\n\n  dismiss() {\n    this.modalController.dismiss({\n      'dismissed': true\n    });\n  }\n\n  updateBakiStok() {\n\n    this.stokService.getStokKatalog().pipe(map(x => x.filter(i => i.id_katalog == this.katalog.id))).subscribe((res) => {\n      console.log(\"stok\", res);\n      \n      let totalStok = 0;\n      res.forEach(element => {\n        totalStok += Number(element.stok_dijual);\n      });\n\n      console.log(\"total\", totalStok);\n      let bakiStok = this.form.value.unit_production - totalStok;\n\n      console.log(\"baki\", bakiStok);\n\n      this.form.patchValue({\n\n        baki_stok: bakiStok\n        // unit_production: this.form.value.unit_production,\n  \n      });\n\n    });\n\n    \n\n  }\n\n  setFormValues() {\n\n    this.form.setValue({\n      id_pengguna: this.katalog.id_pengguna,\n      nama_produk: this.katalog.nama_produk,\n      kandungan_produk: this.katalog.kandungan_produk,\n      harga_produk: this.katalog.harga_produk,\n      berat_produk: this.katalog.berat_produk,\n      keterangan_produk: this.katalog.keterangan_produk,\n\n      baki_stok: this.katalog.unit_production,\n      unit_production: this.katalog.unit_production,\n\n      status_katalog: this.katalog.status_katalog,\n      gambar_url: this.katalog.gambar_url,\n      modified_by: this.katalog.modified_by,\n    });\n\n    this.form.updateValueAndValidity();\n  }\n\n  async logForm() {\n\n    this.form.value.tarikh_aliran = moment(this.form.value.tarikh_aliran).format('YYYY-MM-DD');\n\n    const loading = await this.loadingController.create({message:'Loading ...'});\n    loading.present();\n    console.log(this.form.value)\n\n    this.katalogService.update(this.form.value, Number(this.katalog.id)).subscribe((res) => {\n      console.log(\"updated data\",res);\n      loading.dismiss();\n      this.presentAlert()\n    });\n  }\n\n  async onDelete(){\n    const loading = await this.loadingController.create({message:'Deleting ...'});\n    loading.present();\n    \n    this.katalogService.delete(this.katalog.id).subscribe((res) => {\n      console.log(\"deleted\",res);\n      loading.dismiss();\n      this.presentAlert2()\n    });\n  }\n\n  async presentAlert() {\n    const alert = await this.alertController.create({\n      cssClass: 'my-custom-class',\n      header: 'Kemaskini Berjaya',\n      subHeader: 'Kemaskini Katalog Telah Berjaya',\n      message: '',\n      buttons: ['OK']\n    });\n\n    await alert.present();\n\n    const { role } = await alert.onDidDismiss();\n    console.log('onDidDismiss resolved with role', role);\n\n    this.dismiss();\n    this.refresh();\n  }\n\n  async presentAlert2() {\n    const alert = await this.alertController.create({\n      cssClass: 'my-custom-class',\n      header: 'Berjaya Dihapus',\n      subHeader: 'Katalog Telah Berjaya Dihapus',\n      message: '',\n      buttons: ['OK']\n    });\n\n    await alert.present();\n\n    const { role } = await alert.onDidDismiss();\n    console.log('onDidDismiss resolved with role', role);\n\n    this.dismiss();\n    this.refresh();\n  }\n\n  refresh(): void {\n    window.location.reload();\n  }\n\n  url: any = 'assets/icon/image-not-available.png';\n  onSelectFile(event) {\n    if (event.target.files && event.target.files[0]) {\n      var reader = new FileReader();\n\n      reader.readAsDataURL(event.target.files[0]); // read file as data url\n\n      reader.onload = (event) => { // called once readAsDataURL is completed\n        this.url = event.target.result;\n      }\n\n      this.fileEvent(event);\n    }\n  }\n\n  // Convert the base64 to blob data\n  // and create  formData with it\n\n  images: LocalFile[];\n  async fileEvent(e) {\n\n    this.images = []\n\n    const files = e.target.files;\n    const file = files[0];\n    const filePath = files[0].size;\n    const base64Data = await this.readAsBase64(file);\n\n    const fileName = new Date().getTime() + '.jpeg';\n\n    this.images.push({\n      name: fileName,\n      path: filePath,\n      data: `${base64Data}`,\n    });\n\n    console.log(\"AAAA\", this.images);\n  }\n\n  // https://ionicframework.com/docs/angular/your-first-app/3-saving-photos\n  private async readAsBase64(blob) {\n    // Fetch the photo, read as a blob, then convert to base64 format\n    // const response = await fetch(photo.webPath);\n    // const blob = await response.blob();\n\n    return (await this.convertBlobToBase64(blob)) as string;\n  }\n\n  convertBlobToBase64 = (blob: Blob) =>\n    new Promise((resolve, reject) => {\n      const reader = new FileReader();\n      reader.onerror = reject;\n      reader.onload = () => {\n        resolve(reader.result);\n      };\n      reader.readAsDataURL(blob);\n    });\n}\n","import { HttpClient } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { environment } from 'src/environments/environment';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class KatalogService {\n\n  url: string = environment.baseUrl + \"api/katalog\";\n\n  constructor(private http: HttpClient) { }\n\n  post(data: any): Observable<any> {\n    return this.http.post<any>(`${this.url}`, data);\n  }\n\n  get(user_id): Observable<any> {\n    return this.http.get<any>(`${this.url}` + \"/\" + user_id);\n  }\n\n  update(aliran: any, aliran_id: number,): Observable<any> {\n    return this.http.put<any>(\n      `${this.url}/${aliran_id}`, aliran\n    );\n  }\n\n  delete(aliran_id: number): Observable<any> {\n    return this.http.delete<any>(\n      `${this.url}/${aliran_id}`\n    );\n  }\n}\n","import { HttpClient } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { environment } from 'src/environments/environment';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class StokService {\n\n  url: string = environment.baseUrl + \"api/stok\";\n\n  constructor(private http: HttpClient) { }\n\n  post(data: any): Observable<any> {\n    return this.http.post<any>(`${this.url}`, data);\n  }\n\n  getStokKatalog(): Observable<any> {\n    return this.http.get<any>(`${this.url}`);\n  }\n\n  get(id): Observable<any> {\n    return this.http.get<any>(`${this.url}` + '/' + id);\n  }\n\n  update(data: any, id): Observable<any> {\n    return this.http.put<any>(\n      `${this.url}/${id}`, data\n    );\n  }\n\n  delete(id): Observable<any> {\n    return this.http.delete<any>(\n      `${this.url}/${id}`\n    );\n  }\n\n  url2 : string = environment.baseUrl + \"api/deleteStok\";\n  deleteMany(id_pelanggan): Observable<any> {\n    return this.http.get<any>(\n      `${this.url2}/${id_pelanggan}`\n    );\n  }\n}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJrZW1hc2tpbmkta2F0YWxvZy5wYWdlLnNjc3MifQ== */\";","export default \"<ion-header>\\n  <ion-toolbar>\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-button color=\\\"success\\\" (click)=\\\"dismiss()\\\">\\n        <ion-icon name=\\\"chevron-back-outline\\\"></ion-icon>\\n      </ion-button>\\n      <ion-text color=\\\"success\\\">\\n        <h1>\\n          <strong class=\\\"ion-text-uppercase\\\">\\n            KEMASKINI KATALOG\\n          </strong>\\n        </h1>\\n      </ion-text>\\n    </ion-buttons>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n\\n  <ion-grid>\\n    <form [formGroup]=\\\"form\\\" (ngSubmit)=\\\"logForm()\\\" style=\\\"margin: 20px;\\\">\\n      <ion-row style=\\\"margin-bottom: 20px;\\\">\\n        <ion-col class=\\\"form-control\\\">\\n          <ion-label>NAMA PRODUK</ion-label>\\n          <ion-input type=\\\"text\\\" formControlName=\\\"nama_produk\\\"></ion-input>\\n        </ion-col>\\n      </ion-row>\\n      <ion-row style=\\\"margin-bottom: 20px;\\\">\\n        <ion-col class=\\\"form-control\\\">\\n          <ion-label>KANDUNGAN PRODUK</ion-label>\\n          <!-- <ion-input type=\\\"date\\\" formControlName=\\\"title\\\"></ion-input> -->\\n          <ion-input type=\\\"text\\\" formControlName=\\\"kandungan_produk\\\"></ion-input>\\n        </ion-col>\\n      </ion-row>\\n      <ion-row style=\\\"margin-bottom: 20px;\\\">\\n        <ion-col class=\\\"form-control\\\">\\n          <ion-label>BERAT (kg)</ion-label>\\n          <ion-input placeholder=\\\"0.0\\\" class=\\\"ion-text-right\\\" type=\\\"number\\\" formControlName=\\\"berat_produk\\\">\\n          </ion-input>\\n        </ion-col>\\n        <ion-col class=\\\"form-control\\\">\\n          <ion-label>HARGA JUALAN</ion-label>\\n          <ion-input type=\\\"number\\\" formControlName=\\\"harga_produk\\\"></ion-input>\\n        </ion-col>\\n      </ion-row>\\n\\n      <ion-row style=\\\"margin-bottom: 20px;\\\">\\n        <ion-col class=\\\"form-control\\\">\\n          <ion-label>UNIT PRODUCTION</ion-label>\\n          <ion-input type=\\\"text\\\" formControlName=\\\"unit_production\\\" (change)=\\\"updateBakiStok()\\\"></ion-input>\\n        </ion-col>\\n        <ion-col class=\\\"form-control\\\">\\n          <ion-label>BAKI STOK</ion-label>\\n          <ion-input type=\\\"text\\\" formControlName=\\\"baki_stok\\\" value=\\\"bakiStok\\\" readonly></ion-input>\\n        </ion-col>\\n      </ion-row>\\n\\n      <ion-row style=\\\"margin-bottom: 20px;\\\">\\n        <ion-col class=\\\"form-control\\\">\\n          <ion-label>KETERANGAN LAIN</ion-label>\\n          <!-- <ion-input type=\\\"text\\\" formControlName=\\\"title\\\"></ion-input> -->\\n          <ion-textarea rows=\\\"5\\\" formControlName=\\\"keterangan_produk\\\"></ion-textarea>\\n        </ion-col>\\n      </ion-row>\\n\\n      <ion-row style=\\\"margin-bottom: 20px;\\\">\\n        <ion-col class=\\\"form-control\\\">\\n          <!-- <ion-item lines=\\\"none\\\" style=\\\"border: none;\\\"> -->\\n          <ion-label position=\\\"stacked\\\">STATUS</ion-label>\\n          <ion-select formControlName=\\\"status_katalog\\\">\\n            <ion-select-option value=\\\"pending\\\">Publish</ion-select-option>\\n            <ion-select-option value=\\\"draft\\\">Draft</ion-select-option>\\n          </ion-select>\\n          <!-- </ion-item> -->\\n        </ion-col>\\n      </ion-row>\\n\\n      <ion-row>\\n        <ion-col class=\\\"ion-text-center\\\">\\n          <ion-label class=\\\"ion-text-center\\\" style=\\\"padding-bottom: 0px;\\\">GAMBAR</ion-label>\\n        </ion-col>\\n      </ion-row>\\n\\n      <ion-row style=\\\"margin-bottom: 20px;\\\">\\n        <ion-col class=\\\"form-control\\\" style=\\\"display: flex; justify-content:center\\\">\\n          <label>\\n            <div >\\n              \\n              <br>\\n              <img [src]=\\\"katalog.gambar_url\\\" class=\\\"border-radius-md\\\" width=\\\"80\\\" height=\\\"80\\\"\\n                id=\\\"upload-Preview\\\" />\\n            </div>\\n            <ion-input accept=\\\"image/*\\\" (change)=\\\"onSelectFile($event)\\\" formControlName=\\\"gambar_url\\\"  type=\\\"file\\\" name=\\\"gambar_profil\\\" style=\\\"display: none\\\"></ion-input>\\n          </label>\\n\\n        </ion-col>\\n      </ion-row>\\n\\n      <ion-row style=\\\"margin-bottom: 20px;\\\">\\n        <ion-col class=\\\"form-control\\\">\\n          <ion-button type=\\\"submit\\\" color=\\\"success\\\" expand=\\\"block\\\">KEMASKINI</ion-button>\\n          <ion-button color=\\\"danger\\\" expand=\\\"block\\\" (click)=\\\"onDelete()\\\">HAPUS</ion-button>\\n        </ion-col>\\n      </ion-row>\\n    </form>\\n  </ion-grid>\\n</ion-content>\\n\";"]}