{"version":3,"sources":["webpack:///src/app/core/lawatan/kemaskini-laporan/kemaskini-laporan.page.ts","webpack:///src/app/services/lawatan/lawatan.service.ts","webpack:///src/app/core/lawatan/kemaskini-laporan/kemaskini-laporan.page.scss","webpack:///src/app/core/lawatan/kemaskini-laporan/kemaskini-laporan.page.html"],"names":["KemaskiniLaporanPage","modalController","formBuilder","lawatanService","loadingController","alertController","images","convertBlobToBase64","blob","Promise","resolve","reject","reader","FileReader","onerror","onload","result","readAsDataURL","form","group","namausahawan","Validators","tarikh_lawatan","masa_lawatan","id_tindakan_lawatan","komen","jenis_lawatan","gambar_lawatan","console","log","laporan","url","getTindakanLawatan","hour","split","min","part","parseInt","length","masa","patchValue","format","updateValueAndValidity","dismiss","pipe","map","x","filter","i","status_tindakan_lawatan","subscribe","res","tindakanLawatan","setFormValues","create","cssClass","header","message","buttons","text","role","handler","blah","value","data","gambar_url","updateLaporan","lawatan_id","window","location","reload","alert","present","event","target","files","fileEvent","e","file","filePath","size","readAsBase64","base64Data","fileName","Date","getTime","push","name","path","id","janaLaporan","environment","open","ModalController","FormBuilder","LawatanService","LoadingController","AlertController","Input","Component","selector","template","http","url2","url3","url4","url5","post","pegawai_id","get","id_pengguna","put","id_pegawai","HttpClient","Injectable","providedIn"],"mappings":"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","file":"default-src_app_core_lawatan_kemaskini-laporan_kemaskini-laporan_page_ts-es5.js","sourcesContent":["import { Component, Input, OnInit } from '@angular/core';\nimport { AlertController, LoadingController, ModalController } from '@ionic/angular';\nimport { FormGroup, FormBuilder } from '@angular/forms';\nimport { Validators } from '@angular/forms';\nimport { LawatanService } from 'src/app/services/lawatan/lawatan.service';\nimport { map } from 'rxjs/operators';\nimport { environment } from 'src/environments/environment';\nimport { KatalogService } from 'src/app/services/katalog/katalog.service';\nimport * as moment from 'moment';\nimport { Pipe, PipeTransform } from '@angular/core';\n// @Pipe({name: 'convertFrom24To12Format'})\n\ninterface LocalFile {\n  name: string;\n  path: string;\n  data: string;\n}\n\n@Component({\n  selector: 'app-kemaskini-laporan',\n  templateUrl: './kemaskini-laporan.page.html',\n  styleUrls: ['./kemaskini-laporan.page.scss'],\n})\nexport class KemaskiniLaporanPage implements OnInit {\n\n  @Input() laporan: any;\n\n\n  url: any;\n\n  private form: FormGroup;\n\n  constructor(\n    public modalController: ModalController,\n    private formBuilder: FormBuilder,\n    private lawatanService: LawatanService,\n    public loadingController: LoadingController,\n    public alertController: AlertController,\n  ) {\n    this.form = this.formBuilder.group({\n      namausahawan: ['', Validators.required],\n      tarikh_lawatan: [''],\n      masa_lawatan: [''],\n      id_tindakan_lawatan: ['', Validators.required],\n      komen: ['', ],\n      jenis_lawatan: ['', Validators.required],\n      gambar_lawatan: ['',],\n    });\n  }\n\n  ngOnInit() {\n    console.log(\"laporan\", this.laporan);\n\n    if (this.laporan.gambar_lawatan == null) {\n      this.url = 'assets/icon/image-not-available.png';\n    } else {\n      this.url = this.laporan.gambar_lawatan;\n    }\n\n\n    this.getTindakanLawatan();\n  }\n\n  setFormValues() {\n\n    let hour = (this.laporan.masa_lawatan.split(':'))[0]\n    let min = (this.laporan.masa_lawatan.split(':'))[1]\n    let part = hour > 12 ? 'pm' : 'am';\n    if(parseInt(hour) == 0)\n     hour = 12;\n    min = (min+'').length == 1 ? `0${min}` : min;\n    hour = hour > 12 ? hour - 12 : hour;\n    hour = (hour+'').length == 1 ? `0${hour}` : hour;\n    let masa = `${hour}:${min} ${part}`\n\n    this.form.patchValue({\n      namausahawan: this.laporan.namausahawan,\n      tarikh_lawatan: moment(this.laporan.tarikh_lawatan).format('DD/MM/YYYY'),\n      masa_lawatan: masa,\n      id_tindakan_lawatan: this.laporan.id_tindakan_lawatan,\n      komen: this.laporan.komen,\n      jenis_lawatan: this.laporan.jenis_lawatan,\n      // gambar_lawatan: this.laporan.gambar_lawatan,\n    });\n\n    if (this.laporan.jenis_lawatan == null){\n      this.form.patchValue({\n        jenis_lawatan: \"janji temu\"\n      });\n    }\n\n    this.form.updateValueAndValidity();\n  }\n\n  \n  dismiss() {\n    // using the injected ModalController this page\n    // can \"dismiss\" itself and optionally pass back data\n    this.modalController.dismiss({\n      'dismissed': true\n    });\n  }\n\n  tindakanLawatan: any;\n  getTindakanLawatan() {\n    this.lawatanService.getTindakanLawatan().pipe(map(x => x.filter(i => i.status_tindakan_lawatan == \"aktif\"))).subscribe((res) => {\n      console.log(\"tindakan lawatan\", res);\n\n      this.tindakanLawatan = res;\n\n      this.setFormValues();\n    });\n  }\n\n  async logForm() {\n\n\n    const alert = await this.alertController.create({\n      cssClass: 'my-custom-class',\n      header: '',\n      message: 'Adakah anda setuju untuk menyimpan perubahan ini?',\n      buttons: [\n        {\n          text: 'Tidak',\n          role: 'cancel',\n          cssClass: 'secondary',\n          handler: (blah) => {\n            console.log('Confirm Cancel: blah');\n            this.setFormValues()\n          }\n        }, {\n          text: 'Ya',\n          handler: async () => {\n\n            if (this.images.length > 0) {\n              this.form.value.gambar_lawatan = this.images[0].data;\n            } else {\n              this.form.value.gambar_lawatan = this.laporan.gambar_lawatan;\n            }\n        \n            console.log(this.form.value.gambar_url)\n        \n            this.lawatanService.updateLaporan(this.form.value, this.laporan.lawatan_id).subscribe((res) => {\n              console.log(\"updated\", res);\n        \n              this.dismiss();\n              window.location.reload();\n            });\n            \n          }\n        }\n      ]\n    });\n\n    await alert.present();\n\n  }\n\n\n  //image\n  onSelectFile(event) {\n    if (event.target.files && event.target.files[0]) {\n      var reader = new FileReader();\n\n      reader.readAsDataURL(event.target.files[0]); // read file as data url\n\n      reader.onload = (event) => { // called once readAsDataURL is completed\n        this.url = event.target.result;\n      }\n\n      this.fileEvent(event);\n    }\n  }\n\n  // Convert the base64 to blob data\n  // and create  formData with it\n\n  images: LocalFile[] = [];\n  async fileEvent(e) {\n\n    this.images = []\n\n    const files = e.target.files;\n    const file = files[0];\n    const filePath = files[0].size;\n    const base64Data = await this.readAsBase64(file);\n\n    const fileName = new Date().getTime() + '.jpeg';\n\n    this.images.push({\n      name: fileName,\n      path: filePath,\n      data: `${base64Data}`,\n    });\n\n    console.log(\"AAAA\", this.images);\n  }\n\n  // https://ionicframework.com/docs/angular/your-first-app/3-saving-photos\n  private async readAsBase64(blob) {\n    // Fetch the photo, read as a blob, then convert to base64 format\n    // const response = await fetch(photo.webPath);\n    // const blob = await response.blob();\n\n    return (await this.convertBlobToBase64(blob)) as string;\n  }\n\n  convertBlobToBase64 = (blob: Blob) =>\n    new Promise((resolve, reject) => {\n      const reader = new FileReader();\n      reader.onerror = reject;\n      reader.onload = () => {\n        resolve(reader.result);\n      };\n      reader.readAsDataURL(blob);\n    });\n\n\n\n  download_laporan(id) {\n\n    console.log(id);\n    this.lawatanService.janaLaporan(id).subscribe((res) => {\n      console.log(\"res3\", res);\n\n      let url = environment.baseUrl + 'storage/' + res;\n\n      console.log(url);\n      window.open(url, \"_blank\");\n\n\n    });\n  }\n\n\n}\n","import { HttpClient } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { environment } from 'src/environments/environment';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class LawatanService {\n\n  url: string = environment.baseUrl + \"api/lawatan\";\n\n  constructor(private http: HttpClient) { }\n\n  post(data: any): Observable<any> {\n    return this.http.post<any>(`${this.url}`, data);\n  }\n\n  get(pegawai_id): Observable<any> {\n    return this.http.get<any>(`${this.url}`+'/'+pegawai_id);\n  }\n\n  url2 : string = environment.baseUrl + \"api/lawatan/usahawan\";\n  getLawatanUsahawan(id_pengguna): Observable<any> {\n    return this.http.get<any>(`${this.url2}`+'/'+id_pengguna);\n  }\n\n  update(data: any, id): Observable<any> {\n    return this.http.put<any>(`${this.url}` +'/'+id, data);\n  }\n\n  url3 : string = environment.baseUrl + \"api/tindakanLawatan\";\n  getTindakanLawatan(): Observable<any> {\n    return this.http.get<any>(`${this.url3}`);\n  }\n\n\n  url4 : string = environment.baseUrl + \"api/lawatan/updateLaporan\";\n  updateLaporan(data: any, id): Observable<any> {\n    return this.http.post<any>(`${this.url4}`+'/'+id, data);\n  }\n\n\n  url5 : string = environment.baseUrl + \"api/lawatan/senaraiUsahawan\"\n  getsenaraiusahawan(id_pegawai): Observable<any> {\n    return this.http.get<any>(`${this.url5}`+'/'+id_pegawai);\n  }\n\n\n  tambahLaporan(data: any): Observable<any> {\n    return this.http.post<any>(`${this.url}`+'/laporanBaru', data);\n  }\n\n  janaLaporan(id): Observable<any> {\n    return this.http.get<any>(`${this.url}`+'/janaDokumenLawatan/'+id);\n  }\n\n}\n","export default \"ion-label {\\n  padding: 10px;\\n  margin-bottom: 50px;\\n}\\n\\n.label {\\n  padding: 10px;\\n  margin-bottom: 50px;\\n}\\n\\nion-datetime {\\n  --background: #f5f5f5;\\n  --padding-start: 0.75rem !important;\\n  --padding-top: 0.625rem !important;\\n  --placeholder-color: #8898aa;\\n  --placeholder-font-weight: 400;\\n  border: 1px solid #dee2e6 !important;\\n  border-radius: 1rem !important;\\n  box-shadow: 0 3px 2px rgba(233, 236, 239, 0.05) !important;\\n  line-height: 1.5 !important;\\n}\\n\\nion-select {\\n  --background: #f5f5f5;\\n  --padding-start: 0.75rem !important;\\n  --padding-top: 0.625rem !important;\\n  --placeholder-color: #8898aa;\\n  --placeholder-font-weight: 400;\\n  border: 1px solid #dee2e6 !important;\\n  border-radius: 1rem !important;\\n  box-shadow: 0 3px 2px rgba(233, 236, 239, 0.05) !important;\\n  line-height: 1.5 !important;\\n}\\n\\nion-label {\\n  --color: #525f7f;\\n  font-size: 0.875rem;\\n  font-weight: 600;\\n  padding-bottom: 20px;\\n}\\n\\n.jumlah {\\n  font-size: 30px;\\n  color: #00a651;\\n}\\n\\nion-item {\\n  --max-height: 16px;\\n}\\n\\n.padding {\\n  padding: 5px !important;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImtlbWFza2luaS1sYXBvcmFuLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNJLGFBQUE7RUFDQSxtQkFBQTtBQUNKOztBQUVBO0VBQ0ksYUFBQTtFQUNBLG1CQUFBO0FBQ0o7O0FBRUE7RUFDSSxxQkFBQTtFQUNBLG1DQUFBO0VBQ0Esa0NBQUE7RUFDQSw0QkFBQTtFQUNBLDhCQUFBO0VBQ0Esb0NBQUE7RUFDQSw4QkFBQTtFQUNBLDBEQUFBO0VBQ0EsMkJBQUE7QUFDSjs7QUFFQTtFQUNJLHFCQUFBO0VBQ0EsbUNBQUE7RUFDQSxrQ0FBQTtFQUNBLDRCQUFBO0VBQ0EsOEJBQUE7RUFDQSxvQ0FBQTtFQUNBLDhCQUFBO0VBQ0EsMERBQUE7RUFDQSwyQkFBQTtBQUNKOztBQUVBO0VBQ0ksZ0JBQUE7RUFDQSxtQkFBQTtFQUNBLGdCQUFBO0VBQ0Esb0JBQUE7QUFDSjs7QUFFQTtFQUNJLGVBQUE7RUFDQSxjQUFBO0FBQ0o7O0FBRUE7RUFDSSxrQkFBQTtBQUNKOztBQUVBO0VBQ0ksdUJBQUE7QUFDSiIsImZpbGUiOiJrZW1hc2tpbmktbGFwb3Jhbi5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyJpb24tbGFiZWwge1xuICAgIHBhZGRpbmc6IDEwcHg7XG4gICAgbWFyZ2luLWJvdHRvbTogNTBweDtcbn1cblxuLmxhYmVsIHtcbiAgICBwYWRkaW5nOiAxMHB4O1xuICAgIG1hcmdpbi1ib3R0b206IDUwcHg7XG59XG5cbmlvbi1kYXRldGltZSB7XG4gICAgLS1iYWNrZ3JvdW5kOiAjZjVmNWY1O1xuICAgIC0tcGFkZGluZy1zdGFydDogMC43NXJlbSAhaW1wb3J0YW50O1xuICAgIC0tcGFkZGluZy10b3A6IDAuNjI1cmVtICFpbXBvcnRhbnQ7XG4gICAgLS1wbGFjZWhvbGRlci1jb2xvcjogIzg4OThhYTtcbiAgICAtLXBsYWNlaG9sZGVyLWZvbnQtd2VpZ2h0OiA0MDA7XG4gICAgYm9yZGVyOiAxcHggc29saWQgI2RlZTJlNiAhaW1wb3J0YW50O1xuICAgIGJvcmRlci1yYWRpdXM6IDFyZW0gIWltcG9ydGFudDtcbiAgICBib3gtc2hhZG93OiAwIDNweCAycHggcmdiYSgyMzMsIDIzNiwgMjM5LCAwLjA1KSAhaW1wb3J0YW50O1xuICAgIGxpbmUtaGVpZ2h0OiAxLjUgIWltcG9ydGFudDtcbn1cblxuaW9uLXNlbGVjdHtcbiAgICAtLWJhY2tncm91bmQ6ICNmNWY1ZjU7XG4gICAgLS1wYWRkaW5nLXN0YXJ0OiAwLjc1cmVtICFpbXBvcnRhbnQ7XG4gICAgLS1wYWRkaW5nLXRvcDogMC42MjVyZW0gIWltcG9ydGFudDtcbiAgICAtLXBsYWNlaG9sZGVyLWNvbG9yOiAjODg5OGFhO1xuICAgIC0tcGxhY2Vob2xkZXItZm9udC13ZWlnaHQ6IDQwMDtcbiAgICBib3JkZXI6IDFweCBzb2xpZCAjZGVlMmU2ICFpbXBvcnRhbnQ7XG4gICAgYm9yZGVyLXJhZGl1czogMXJlbSAhaW1wb3J0YW50O1xuICAgIGJveC1zaGFkb3c6IDAgM3B4IDJweCByZ2JhKDIzMywgMjM2LCAyMzksIDAuMDUpICFpbXBvcnRhbnQ7XG4gICAgbGluZS1oZWlnaHQ6IDEuNSAhaW1wb3J0YW50O1xufVxuXG5pb24tbGFiZWwge1xuICAgIC0tY29sb3I6ICM1MjVmN2Y7XG4gICAgZm9udC1zaXplOiAwLjg3NXJlbTtcbiAgICBmb250LXdlaWdodDogNjAwO1xuICAgIHBhZGRpbmctYm90dG9tOiAyMHB4O1xufVxuXG4uanVtbGFoIHtcbiAgICBmb250LXNpemU6IDMwcHg7XG4gICAgY29sb3I6ICMwMGE2NTE7XG59XG5cbmlvbi1pdGVtIHtcbiAgICAtLW1heC1oZWlnaHQ6IDE2cHg7XG59XG5cbi5wYWRkaW5ne1xuICAgIHBhZGRpbmc6IDVweCAhaW1wb3J0YW50O1xufVxuXG5cblxuLy8gYnV0dG9uOmRpc2FibGVkLFxuLy8gYnV0dG9uW2Rpc2FibGVkXSB7XG4vLyAgICAgYm9yZGVyOiAxcHggc29saWQgIzk5OTk5OTtcbi8vICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjY2NjY2NjO1xuLy8gICAgIGNvbG9yOiAjNjY2NjY2O1xuLy8gfVxuXG4iXX0= */\";","export default \"<ion-header>\\n  <ion-toolbar>\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-button color=\\\"success\\\" (click)=\\\"dismiss()\\\">\\n        <ion-icon name=\\\"chevron-back-outline\\\"></ion-icon>\\n      </ion-button>\\n      <ion-text color=\\\"success\\\">\\n        <h1>\\n          <strong class=\\\"ion-text-uppercase\\\">\\n            LAPORAN LAWATAN\\n          </strong>\\n        </h1>\\n      </ion-text>\\n    </ion-buttons>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n  <!-- <form [formGroup]=\\\"tunai_masuk\\\" (ngSubmit)=\\\"logForm()\\\" style=\\\"margin: 30px;\\\">\\n    <ion-item class=\\\"form-control\\\">\\n      <ion-label>Todo</ion-label>\\n      <ion-input type=\\\"text\\\" formControlName=\\\"title\\\"></ion-input>\\n    </ion-item>\\n\\n    <ion-item>\\n      <ion-label>Description</ion-label>\\n      <ion-textarea formControlName=\\\"description\\\"></ion-textarea>\\n    </ion-item>\\n    <ion-button type=\\\"submit\\\" [disabled]=\\\"!tunai_masuk.valid\\\">Submit</ion-button>\\n  </form> -->\\n  \\n\\n  <ion-grid>\\n    <form [formGroup]=\\\"form\\\" (ngSubmit)=\\\"logForm()\\\" enctype=\\\"multipart/form-data\\\">\\n      <ion-row>\\n        <ion-col class=\\\"form-control\\\">\\n          <ion-item lines=\\\"none\\\" style=\\\"border: none;\\\">\\n            <ion-label class=\\\"padding\\\" position=\\\"stacked\\\">NAMA USAHAWAN </ion-label>\\n            <ion-input formControlName=\\\"namausahawan\\\" readonly></ion-input>\\n          </ion-item>\\n        </ion-col>\\n      </ion-row>\\n      <ion-row> \\n        <ion-col class=\\\"form-control\\\">\\n          <ion-item lines=\\\"none\\\" class=\\\"form-control\\\" style=\\\"border: none;\\\">\\n            <ion-label class=\\\"padding\\\" position=\\\"stacked\\\">TARIKH </ion-label>\\n            <ion-input type=\\\"text\\\" formControlName=\\\"tarikh_lawatan\\\" readonly></ion-input>\\n            <!-- <ion-datetime presentation=\\\"date\\\" displayFormat=\\\"DD/MM/YYYY\\\" formControlName=\\\"tarikh_lawatan\\\" readonly style=\\\"background-color: #f5f5f5;\\\"> -->\\n            <!-- </ion-datetime> -->\\n          </ion-item>\\n        </ion-col>\\n        <ion-col class=\\\"form-control\\\">\\n          <ion-item lines=\\\"none\\\" class=\\\"form-control\\\" style=\\\"border: none;\\\">\\n            <ion-label class=\\\"padding\\\" position=\\\"stacked\\\">MASA </ion-label>\\n            <ion-input type=\\\"text\\\" formControlName=\\\"masa_lawatan\\\" readonly></ion-input>\\n            <!-- <ion-datetime presentation=\\\"time\\\" displayFormat=\\\"HHmm\\\" formControlName=\\\"masa_lawatan\\\" readonly style=\\\"background-color: #f5f5f5;\\\"> -->\\n            <!-- </ion-datetime> -->\\n          </ion-item>\\n        </ion-col>\\n      </ion-row>\\n\\n      <ion-row>\\n        <ion-col class=\\\"form-control\\\">\\n          <ion-item lines=\\\"none\\\" style=\\\"border: none;\\\">\\n            <ion-label class=\\\"padding\\\" position=\\\"stacked\\\">JENIS LAWATAN </ion-label>\\n            <ion-select formControlName=\\\"jenis_lawatan\\\">\\n              <ion-select-option value=\\\"janji temu\\\">JANJI TEMU</ion-select-option>\\n              <ion-select-option value=\\\"datang terus\\\">DATANG TERUS</ion-select-option>\\n            </ion-select>\\n          </ion-item>\\n        </ion-col>\\n      </ion-row>\\n\\n      <ion-row>\\n        <ion-col class=\\\"form-control\\\">\\n          <ion-item lines=\\\"none\\\" style=\\\"border: none;\\\">\\n            <ion-label class=\\\"padding\\\" position=\\\"stacked\\\">TINDAKAN USAHAWAN </ion-label>\\n            <ion-select formControlName=\\\"id_tindakan_lawatan\\\">\\n              <ion-select-option *ngFor=\\\"let tindakanLawatan of tindakanLawatan\\\" [value]=\\\"tindakanLawatan.id\\\" selected=\\\"tindakanLawatan.id == this.laporan.id_tindakan_lawatan\\\">\\n                {{tindakanLawatan.nama_tindakan_lawatan}}</ion-select-option>\\n            </ion-select>\\n          </ion-item>\\n        </ion-col>\\n      </ion-row>\\n\\n      <ion-row>\\n        <ion-col class=\\\"form-control\\\">\\n          <ion-item lines=\\\"none\\\" style=\\\"border: none;\\\">\\n            <ion-label class=\\\"padding\\\" position=\\\"stacked\\\">KOMEN KESELURUHAN </ion-label>\\n            <ion-textarea rows=\\\"4\\\" formControlName=\\\"komen\\\" ></ion-textarea>\\n          </ion-item>\\n        </ion-col>\\n      </ion-row>\\n\\n      <ion-row>\\n        <ion-col class=\\\"ion-text-center\\\">\\n          <ion-label class=\\\"ion-text-center\\\" style=\\\"padding-bottom: 0px;\\\">GAMBAR</ion-label>\\n        </ion-col>\\n      </ion-row>\\n\\n      <ion-row style=\\\"margin-bottom: 20px; \\\">\\n        <ion-col class=\\\"form-control\\\" style=\\\"display: flex; justify-content:center\\\">\\n          <label style=\\\"display: flex; justify-content:center\\\">\\n            <div style=\\\"display: flex; justify-content:center\\\">\\n              <img [src]=\\\"url\\\" class=\\\"border-radius-md\\\" width=\\\"40%\\\" \\n                id=\\\"upload-Preview\\\" style=\\\"border-radius: 10px;\\\" />\\n            </div>\\n            <input id=\\\"upload-Image\\\" accept=\\\"image/*\\\" (change)=\\\"onSelectFile($event)\\\" formControlName=\\\"gambar_lawatan\\\" type=\\\"file\\\"  style=\\\"display: none\\\">\\n          </label>\\n\\n        </ion-col>\\n      </ion-row>\\n\\n      <ion-row style=\\\"margin:20px;\\\">\\n        <ion-col class=\\\"form-control\\\">\\n          \\n          <ion-button color=\\\"success\\\" expand=\\\"block\\\" [disabled]=\\\"form.invalid\\\" type=\\\"submit\\\">KEMASKINI LAPORAN</ion-button>\\n          <ion-button color=\\\"success\\\" expand=\\\"block\\\" (click)=\\\"download_laporan(laporan.lawatan_id)\\\">CETAK LAPORAN</ion-button>\\n        </ion-col>\\n      </ion-row>\\n\\n    </form>\\n  </ion-grid>\\n\\n\\n\\n\\n</ion-content>\";"]}